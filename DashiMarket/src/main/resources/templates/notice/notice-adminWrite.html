<!DOCTYPE html>
<html lang="ko" xmlns="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="${mode == 'edit' ? '[관리자 전용] 게시글 수정' : '[관리자 전용] 게시글 작성'}">[관리자 전용] 게시글 작성</title>

    <!-- 폰트 -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/css/notice/notice-adminWrite.css}" />
</head>

<body>
    <div class="container">
        <div class="header">
            <!-- 작성 모드: "새 게시글 작성", 수정 모드: "게시글 수정" -->
            <h1 th:text="${mode == 'edit' ? '게시글 수정' : '새 게시글 작성'}">새 게시글 작성</h1>
        </div>

        <!-- form action을 동적으로 설정 -->
        <form id="writeForm" th:action="${mode == 'edit' ? '/notice/edit/' + notice.noticeNo : '/notice/write'}"
            method="post" enctype="multipart/form-data">

            <!-- mode와 notice 데이터를 JavaScript로 전달 -->
            <input type="hidden" id="pageMode" th:value="${mode}" />
            <input type="hidden" id="noticeNo" th:value="${notice != null ? notice.noticeNo : ''}" />

            <ul class="form-list">
                <li class="form-item">
                    <div class="label-area">
                        <span class="form-label">게시판 종류</span>
                    </div>
                    <div class="field-area">
                        <select class="form-control form-select" id="boardSelect" name="admWriteBoardSelect" required>
                            <option value="notice" th:selected="${notice != null && notice.boardType == 'notice'}">공지사항
                            </option>
                            <option value="qna" th:selected="${notice != null && notice.boardType == 'qna'}">자주 묻는 질문
                            </option>
                        </select>
                    </div>
                </li>

                <li class="form-item">
                    <div class="label-area">
                        <span class="form-label">제목</span>
                    </div>
                    <div class="field-area">
                        <input type="text" class="form-control" name="admWriteTitle"
                            th:value="${notice != null ? notice.noticeTitle : ''}" placeholder="ex) [공지] 게시글 제목을 입력하세요."
                            required />
                    </div>
                </li>

                <li class="form-item content-item">
                    <div class="label-area">
                        <span class="form-label">내용</span>
                    </div>
                    <div class="field-area">
                        <textarea class="form-control content-textarea" name="admWriteContent" placeholder="내용을 입력하세요"
                            required th:text="${notice != null ? notice.noticeContent : ''}"></textarea>
                    </div>
                </li>

                <li class="form-item attachment-item">
                    <div class="label-area">
                        <span class="form-label">첨부파일</span>
                    </div>
                    <div class="field-area">
                        <div class="attachment-container">
                            <div class="attachment-area"></div>

                            <div class="attachment-buttons">
                                <label for="fileInput" class="attachment-btn">첨부파일</label>
                                <input type="file" id="fileInput" name="admWriteFileInput" style="display:none;" />
                            </div>

                            <div>
                                <span class="attachment-description">
                                    *사진(이미지)만 등록 가능합니다.(최대 10MB 등록 가능)
                                </span>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>

            <div class="button-group">
                <!-- 취소 버튼 -->
                <button type="button" class="btn btn-cancel" id="cancelBtn">
                    취소하기
                </button>
                <!-- 제출 버튼 - 텍스트 동적 변경 -->
                <button type="submit" class="btn btn-submit" th:text="${mode == 'edit' ? '수정하기' : '등록하기'}">
                    등록하기
                </button>
            </div>
        </form>
    </div>

    <script th:src="@{/js/notice/notice-adminWrite.js}"></script>
</body>

</html>